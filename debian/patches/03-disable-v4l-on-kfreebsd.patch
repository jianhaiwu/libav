Author: Reinhard Tartler <siretart@tauware.de>
Description: forcefully disable v4l on kfreebsd
Forwarded: not-yet

This avoids a FTBFS:
https://buildd.debian.org/status/fetch.php?pkg=libav&arch=kfreebsd-amd64&ver=4%3A0.7.3-1&stamp=1324858573
https://buildd.debian.org/status/fetch.php?pkg=libav&arch=kfreebsd-i386&ver=4%3A0.7.3-1&stamp=1324859233

While fixing the build failure would be preferred, AFAIUI v4l is of rather limited use on kfreebsd anyways.

diff --git a/configure b/configure
index f4c3274..db29b77 100755
--- a/configure
+++ b/configure
@@ -2929,8 +2929,8 @@ fi
 texi2html -version > /dev/null 2>&1 && enable texi2html || disable texi2html
 
 check_header linux/fb.h
-check_header linux/videodev.h
-check_header linux/videodev2.h
+test $target_os = 'linux' && check_header linux/videodev.h
+test $target_os = 'linux' && check_header linux/videodev2.h
 check_header sys/videoio.h
 
 check_func_headers "windows.h vfw.h" capCreateCaptureWindow "$vfwcap_indev_extralibs"
