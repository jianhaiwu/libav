From cafefd889b9e9f36814dc4ca13ed169f667b41a4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Martin=20Storsj=C3=B6?= <martin@martin.st>
Date: Tue, 30 Oct 2012 12:17:35 +0200
Subject: [PATCH 086/278] cngdec: Fix the memset size to cover the full array
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This was a leftover from previous iterations of the code, where the
refl coef arrays were statically allocated.

Signed-off-by: Martin Storsj√∂ <martin@martin.st>
---
 libavcodec/cngdec.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libavcodec/cngdec.c b/libavcodec/cngdec.c
index 8cfe9cf..c05bfd9 100644
--- a/libavcodec/cngdec.c
+++ b/libavcodec/cngdec.c
@@ -108,7 +108,7 @@ static int cng_decode_frame(AVCodecContext *avctx, void *data,
     if (avpkt->size) {
         float dbov = -avpkt->data[0] / 10.0;
         p->target_energy = 1081109975 * pow(10, dbov) * 0.75;
-        memset(p->target_refl_coef, 0, sizeof(p->refl_coef));
+        memset(p->target_refl_coef, 0, p->order * sizeof(*p->target_refl_coef));
         for (i = 0; i < FFMIN(avpkt->size - 1, p->order); i++) {
             p->target_refl_coef[i] = (avpkt->data[1 + i] - 127) / 128.0;
         }
-- 
1.7.9.5

