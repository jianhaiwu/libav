From ec2694d25905c217e5815947cda896aa25398388 Mon Sep 17 00:00:00 2001
From: Justin Ruggles <justin.ruggles@gmail.com>
Date: Mon, 15 Oct 2012 16:40:44 -0400
Subject: [PATCH 110/278] g722dec: set channel layout at initialization
 instead of validating it

---
 libavcodec/g722dec.c |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

diff --git a/libavcodec/g722dec.c b/libavcodec/g722dec.c
index ea06ce0..3364850 100644
--- a/libavcodec/g722dec.c
+++ b/libavcodec/g722dec.c
@@ -34,6 +34,7 @@
  *       respectively of each byte are ignored.
  */
 
+#include "libavutil/audioconvert.h"
 #include "avcodec.h"
 #include "get_bits.h"
 #include "g722.h"
@@ -57,11 +58,9 @@ static av_cold int g722_decode_init(AVCodecContext * avctx)
 {
     G722Context *c = avctx->priv_data;
 
-    if (avctx->channels != 1) {
-        av_log(avctx, AV_LOG_ERROR, "Only mono tracks are allowed.\n");
-        return AVERROR_INVALIDDATA;
-    }
-    avctx->sample_fmt = AV_SAMPLE_FMT_S16;
+    avctx->channels       = 1;
+    avctx->channel_layout = AV_CH_LAYOUT_MONO;
+    avctx->sample_fmt     = AV_SAMPLE_FMT_S16;
 
     c->band[0].scale_factor = 8;
     c->band[1].scale_factor = 2;
-- 
1.7.9.5

