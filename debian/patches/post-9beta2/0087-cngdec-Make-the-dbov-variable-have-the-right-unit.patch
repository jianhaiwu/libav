From 036e6c37d31e471447f71decaea55996bde3d9a2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Martin=20Storsj=C3=B6?= <martin@martin.st>
Date: Tue, 30 Oct 2012 11:56:54 +0200
Subject: [PATCH 087/278] cngdec: Make the dbov variable have the right unit
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Previously the unit of the variable was Bov, not dBov.

Signed-off-by: Martin Storsj√∂ <martin@martin.st>
---
 libavcodec/cngdec.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libavcodec/cngdec.c b/libavcodec/cngdec.c
index c05bfd9..fca4b9e 100644
--- a/libavcodec/cngdec.c
+++ b/libavcodec/cngdec.c
@@ -106,8 +106,8 @@ static int cng_decode_frame(AVCodecContext *avctx, void *data,
     float scaling;
 
     if (avpkt->size) {
-        float dbov = -avpkt->data[0] / 10.0;
-        p->target_energy = 1081109975 * pow(10, dbov) * 0.75;
+        int dbov = -avpkt->data[0];
+        p->target_energy = 1081109975 * pow(10, dbov / 10.0) * 0.75;
         memset(p->target_refl_coef, 0, p->order * sizeof(*p->target_refl_coef));
         for (i = 0; i < FFMIN(avpkt->size - 1, p->order); i++) {
             p->target_refl_coef[i] = (avpkt->data[1 + i] - 127) / 128.0;
-- 
1.7.9.5

