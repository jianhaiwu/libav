From 7efbba2e3665285207bf769b8f0d712cedf1bfd9 Mon Sep 17 00:00:00 2001
From: Justin Ruggles <justin.ruggles@gmail.com>
Date: Sun, 21 Oct 2012 14:36:38 -0400
Subject: [PATCH 118/278] cook: use av_get_channel_layout_nb_channels()
 instead of cook_count_channels()

---
 libavcodec/cook.c |   12 +-----------
 1 file changed, 1 insertion(+), 11 deletions(-)

diff --git a/libavcodec/cook.c b/libavcodec/cook.c
index 211fe12..1524719 100644
--- a/libavcodec/cook.c
+++ b/libavcodec/cook.c
@@ -1034,16 +1034,6 @@ static void dump_cook_context(COOKContext *q)
 }
 #endif
 
-static av_cold int cook_count_channels(unsigned int mask)
-{
-    int i;
-    int channels = 0;
-    for (i = 0; i < 32; i++)
-        if (mask & (1 << i))
-            ++channels;
-    return channels;
-}
-
 /**
  * Cook initialization
  *
@@ -1147,7 +1137,7 @@ static av_cold int cook_decode_init(AVCodecContext *avctx)
             if (extradata_size >= 4)
                 channel_mask |= q->subpacket[s].channel_mask = bytestream_get_be32(&edata_ptr);
 
-            if (cook_count_channels(q->subpacket[s].channel_mask) > 1) {
+            if (av_get_channel_layout_nb_channels(q->subpacket[s].channel_mask) > 1) {
                 q->subpacket[s].total_subbands = q->subpacket[s].subbands +
                                                  q->subpacket[s].js_subband_start;
                 q->subpacket[s].joint_stereo = 1;
-- 
1.7.9.5

