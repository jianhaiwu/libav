From 32c7769e5c851ff7b47a83113b97a325dde7b442 Mon Sep 17 00:00:00 2001
From: Justin Ruggles <justin.ruggles@gmail.com>
Date: Mon, 22 Oct 2012 15:45:38 -0400
Subject: [PATCH 128/278] gsmdec: always set channel layout and sample rate at
 initialization

Only mono 8kHz is supported.
---
 libavcodec/gsmdec.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/libavcodec/gsmdec.c b/libavcodec/gsmdec.c
index a5e0d7d..14b7e03 100644
--- a/libavcodec/gsmdec.c
+++ b/libavcodec/gsmdec.c
@@ -24,6 +24,7 @@
  * GSM decoder
  */
 
+#include "libavutil/audioconvert.h"
 #include "avcodec.h"
 #include "get_bits.h"
 #include "msgsmdec.h"
@@ -34,10 +35,10 @@ static av_cold int gsm_init(AVCodecContext *avctx)
 {
     GSMContext *s = avctx->priv_data;
 
-    avctx->channels = 1;
-    if (!avctx->sample_rate)
-        avctx->sample_rate = 8000;
-    avctx->sample_fmt = AV_SAMPLE_FMT_S16;
+    avctx->channels       = 1;
+    avctx->channel_layout = AV_CH_LAYOUT_MONO;
+    avctx->sample_rate    = 8000;
+    avctx->sample_fmt     = AV_SAMPLE_FMT_S16;
 
     switch (avctx->codec_id) {
     case AV_CODEC_ID_GSM:
-- 
1.7.9.5

